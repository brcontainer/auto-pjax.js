/* Pjax.js 0.5.6 | Copyright (c) 2020 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(e,t,n){var r,a,o,i,l=t.history,c=t.URL,s=!!t.DOMParser,u={},d=e.implementation,p=t.location.protocol.replace(/:/g,"")+"://"+t.location.host,f=/^(input|textarea|select|datalist|button|output)$/i,h=!1,m=t.Element&&t.Element.prototype,v=Array.prototype.slice;if(t.Pjax={supported:!!(m&&l.pushState&&(s||d&&d.createHTMLDocument)),remove:X,start:function(n){if(!/^https?:$/.test(t.location.protocol)||!t.Pjax.supported)return;for(var r in X(),a={linkSelector:"a:not([data-pjax-ignore]):not([href^='#']):not([href^='javascript:'])",formSelector:"form:not([data-pjax-ignore]):not([action^='javascript:'])",containers:["#pjax-container"],updatecurrent:!1,updatehead:!0,insertion:!0,scrollLeft:0,scrollTop:0,nocache:!1,loader:!0,proxy:""})n&&r in n&&(a[r]=n[r]);n=null,/^(interactive|complete)$/.test(e.readyState)?P():e.addEventListener("DOMContentLoaded",P)},request:function(e,t){b(e,t.replace?2:1,t.method,null,t.data)},on:function(e,t){y(e,t)},off:function(e,t){y(e,t,!0)}},s)try{var x=j("<html><head><title>1</title></head><body>1</body></html>");s=!!(x.head&&x.title&&x.body)}catch(e){s=!1}function S(){if(o)return clearTimeout(o),o=0,i.className="pjax-loader pjax-hide",void setTimeout(S,20);i||((i=e.createElement("div")).innerHTML='<div class="pjax-progress"></div>',e.body.appendChild(i)),i.className="pjax-loader pjax-start",o=setTimeout(function(){o=0,i.className+=" pjax-inload"},10)}function g(e,t,r){[].slice.call(e.querySelectorAll(t)).forEach(r),r=n}function j(e){if(s)return(new DOMParser).parseFromString(e,"text/html");var t=d.createHTMLDocument("");return/^\s*<(\!doctype|html)[^>]*>/i.test(e)?(t.documentElement.innerHTML=e,t.body&&t.head||(t=d.createHTMLDocument("")).write(e)):t.body.innerHTML=e,t}function L(t){var n,r,a,o=[],i=t.children;for(n=i.length-1;n>=0;n--)"TITLE"!==i[n].tagName&&o.push(i[n].outerHTML);for(n=(i=e.head.children).length-1;n>=0;n--)"TITLE"===i[n].tagName||M(i[n],"resource")||(-1===(r=o.indexOf(i[n].outerHTML))?i[n].parentNode.removeChild(i[n]):o.splice(r,1));for((a=e.createElement("div")).innerHTML=o.join(""),n=(i=a.children).length-1;n>=0;n--)M(i[n],"resource")||e.head.appendChild(i[n]);a=o=null}function T(e,t,n,r){if(u[e])for(var a=u[e],o=0;o<a.length;o++)a[o](t,n,r)}function y(e,t,n){"function"==typeof t&&(u[e]||(u[e]=[]),n?u[e]=u[e].filter(function(e){return e!==t}):u[e].push(t))}function E(n,r,a,o){var i,c=j(r),s=c.title||"",d=a.containers,p=a.insertion,f=a.scrollLeft>0?+a.scrollLeft:t.scrollX||t.pageXOffset,h=a.scrollTop>0?+a.scrollTop:t.scrollY||t.pageYOffset;if(o){var m={pjaxUrl:n,pjaxData:r,pjaxConfig:a};1===o?l.pushState(m,s,n):2===o&&l.replaceState(m,s,n)}if(u.dom)return T("dom",n,c);a.updatehead&&c.head&&L(c.head),e.title=s;for(var x=d.length-1;x>=0;x--)(i=c.body.querySelector(d[x]))&&g(e,d[x],function(t){if("append"===p||"prepend"===p){for(var n=e.createDocumentFragment(),r=0,a=v.call(i.childNodes),o=a.length;r<o;++r)n.appendChild(a[r]);"append"===p?t.appendChild(n):t.insertBefore(n,t.firstChild),n=null}else t.innerHTML=i.innerHTML});t.scrollTo(f,h),c=d=null}function M(e,t){var n,r=e.getAttribute("data-pjax-"+t);if("true"===r||"false"===r)return"true"===r;if(!isNaN(r))return parseFloat(r);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(r))try{n=JSON.parse(r)}catch(e){}return n||r}function N(e){var t,n,r=JSON.parse(JSON.stringify(a)),o=["containers","updatecurrent","updatehead","insertion","loader","scroll-left","scroll-top","done","fail"];if(!e)return r;for(var i=o.length-1;i>=0;i--)(n=M(e,t=o[i]))&&(r[t=t.toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})]=n);return r}function C(e,t,n,r,a,l){t.loader&&(o&&clearTimeout(o),i.className+=" pjax-end",o=setTimeout(function(){o=0,i.className+=" pjax-hide"},1e3)),l&&E(e,l,t,n),T(l?"done":"fail",e),T("then",e),a&&new Function(a).call(r)}function D(){r&&r.abort()}function b(t,n,o,i,l){D();var s=N(i);if(T("initiate",t,s),s.loader&&S(),u.handler)T("handler",{url:t,state:n,method:o,element:i},s,C);else{var d={"X-PJAX-Container":s.containers.join(","),"X-PJAX-URL":t,"X-PJAX":"true"},p=a.proxy||t;for(var f in a.nocache&&(p=function(t){var n,r="_="+ +new Date;return c?(n=e.createElement("a")).href=t:n=new c(t),n.search+=(n.search?"&":"?")+r,t=n+"",n=null,t}(t)),(r=new XMLHttpRequest).open(o,p,!0),d)r.setRequestHeader(f,d[f]);r.onreadystatechange=function(){if(4===this.readyState){var e=this.status;e>=200&&e<300||304===e?C(t,s,n,i,s.done,this.responseText):C(t,s,e,i,s.fail)}},r.send(l||"")}}function H(e){if(0===e.button){var t,n,r=e.target;if(r.matches(a.linkSelector))t=r.href;else{for(;r=r.parentNode;)if("A"===r.tagName){n=r;break}if(!n||!n.matches(a.linkSelector))return;t=(r=n).href}w("GET",t,null,r,e)}}function O(e){var n,r,o,i=e.target;if(i.matches(a.formSelector)&&("POST"!==(o=String(i.method).toUpperCase())||t.FormData)){if(n=i.action,"POST"!==o||"multipart/form-data"!==i.enctype)r=function(e){var t=[];return g(e,"[name]",function(e){e.name&&f.test(e.tagName)&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")}(i),"POST"!==o&&(n=n.replace(/\?.*/g,"")+"?",r&&(n+=r),r=null);else{if(!t.FormData)return;r=new FormData(i)}w(o,n,r,i,e)}}function w(e,n,r,o,i){0!==n.indexOf(p+"/")&&n!==p||(i.preventDefault(),n!==t.location+""||"POST"===e?b(n,1,e,o,r):a.updatecurrent&&b(n,2,e,o,r))}function U(e){e.state&&e.state.pjaxUrl&&(D(),E(e.state.pjaxUrl,e.state.pjaxData,e.state.pjaxConfig,!1),T("history",e.state.pjaxUrl,e.state))}function P(){if(!h){h=!1;var n=t.location+"",r=t.history.state;r&&r.pjaxUrl||l.replaceState({pjaxUrl:n,pjaxData:e.documentElement.outerHTML,pjaxConfig:a},e.title,n),t.addEventListener("unload",D),t.addEventListener("popstate",U),a.linkSelector&&e.addEventListener("click",H),a.formSelector&&e.addEventListener("submit",O)}}function X(){a&&h&&(e.removeEventListener("click",H),e.removeEventListener("submit",O),t.removeEventListener("unload",D),t.removeEventListener("popstate",U),h=!1,a=n)}m&&!m.matches&&(m.matches=m.matchesSelector||m.mozMatchesSelector||m.msMatchesSelector||m.oMatchesSelector||m.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=m.length;--n>=0&&t[n]!==this;);return n>-1})}(document,window);
