/* Pjax.js 0.6.4 | Copyright (c) 2020 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(e){var t,n,r,a,o="undefined"!=typeof window?window:{},i=o.document||{},l=o.history,c=o.URL,s=!!o.DOMParser,u=!o.FormData,d={},p=i.implementation,f=o.location,h=f?f.protocol.replace(/:/g,"")+"://"+o.location.host:"",m=/^(input|textarea|select|datalist|button|output)$/i,v=!1,g=o.Element&&o.Element.prototype,x=Array.prototype.slice,S=1,L=2,T=g&&l.pushState&&(s||p&&p.createHTMLDocument);if(s)try{var j=M("<html><head><title>1</title></head><body>1</body></html>");s=!!(j.head&&j.title&&j.body)}catch(e){s=!1}function y(){if(r)return clearTimeout(r),r=0,a.className="pjax-loader pjax-hide",void setTimeout(y,20);a||((a=i.createElement("div")).innerHTML='<div class="pjax-progress"></div>',i.body.appendChild(a)),a.className="pjax-loader pjax-start",r=setTimeout(function(){r=0,a.className+=" pjax-inload"},10)}function E(t,n,r){[].slice.call(t.querySelectorAll(n)).forEach(r),r=e}function M(e){if(s)return(new DOMParser).parseFromString(e,"text/html");var t=p.createHTMLDocument("");return/^\s*<(\!doctype|html)[^>]*>/i.test(e)?(t.documentElement.innerHTML=e,t.body&&t.head||(t=p.createHTMLDocument("")).write(e)):t.body.innerHTML=e,t}function C(e,t,n,r){if(d[e])for(var a=d[e],o=0,i=a.length;o<i;o++)a[o](t,n,r)}function N(e,t,n){"function"==typeof t&&(d[e]||(d[e]=[]),n?d[e]=d[e].filter(function(e){return e!==t}):d[e].push(t))}function H(e,t,n,r){var a,c=M(t),s=c.title||"",u=n.containers,p=n.insertion,f=n.scrollLeft>0?+n.scrollLeft:o.scrollX||o.pageXOffset,h=n.scrollTop>0?+n.scrollTop:o.scrollY||o.pageYOffset;if(r){var m={pjaxUrl:e,pjaxData:t,pjaxConfig:n};r===S?l.pushState(m,s,e):r===L&&l.replaceState(m,s,e)}if(d.dom)return C("dom",e,c);n.updatehead&&c.head&&function(e){var t,n,r,a=[],o=e.children;for(t=o.length-1;t>=0;t--)"TITLE"!==o[t].tagName&&a.push(o[t].outerHTML);for(t=(o=i.head.children).length-1;t>=0;t--)"TITLE"===o[t].tagName||b(o[t],"resource")||(-1===(n=a.indexOf(o[t].outerHTML))?o[t].parentNode.removeChild(o[t]):a.splice(n,1));for((r=i.createElement("div")).innerHTML=a.join(""),t=(o=r.children).length-1;t>=0;t--)b(o[t],"resource")||i.head.appendChild(o[t]);r=a=null}(c.head),i.title=s;for(var v=u.length-1;v>=0;v--)(a=c.body.querySelector(u[v]))&&E(i,u[v],function(e){if("append"===p||"prepend"===p){for(var t=i.createDocumentFragment(),n=0,r=x.call(a.childNodes),o=r.length;n<o;++n)t.appendChild(r[n]);"append"===p?e.appendChild(t):e.insertBefore(t,e.firstChild),t=null}else e.innerHTML=a.innerHTML});o.scrollTo(f,h),c=u=null}function b(e,t){var n=e.getAttribute("data-pjax-"+t);if("true"===n||"false"===n)return"true"===n;if(!isNaN(n))return parseFloat(n);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(n))try{n=JSON.parse(n)}catch(e){}return n}function w(e,t,n,o,i,l){t.loader&&(r&&clearTimeout(r),a.className+=" pjax-end",r=setTimeout(function(){r=0,a.className+=" pjax-hide"},1e3)),l&&H(e,l,t,n),C(l?"done":"fail",e),C("then",e),i&&new Function(i).call(o)}function D(){t&&t.abort()}function O(e,r,a,o,l,s){D(),C("initiate",e,s),s.loader&&y();var u=n.headers;if(u["X-PJAX-Container"]=s.containers.join(","),u["X-PJAX"]="true",d.handler)return C("handler",{url:e,state:r,method:a,element:o},s,w);for(var p in n.proxy&&(e=n.proxy+encodeURIComponent(e)),n.nocache&&(e=function(e){var t,n="_="+ +new Date;return c?(t=i.createElement("a")).href=e:t=new c(e),t.search+=(t.search?"&":"?")+n,e=t+"",t=null,e}(e)),(t=new XMLHttpRequest).open(a,e,!0),u)t.setRequestHeader(p,u[p]);t.onreadystatechange=function(){if(4===this.readyState){var n=this.status;if(n>=200&&n<300){var a=t.getResponseHeader("X-PJAX-Container");a&&(s.containers=a.split(",")),w(t.getResponseHeader("X-PJAX-URL")||e,s,r,o,s.done,this.responseText)}else w(e,s,n,o,s.fail)}},t.send(l||"")}function U(e){if(0===e.button){var t,r,a=e.target;if(a.matches(n.linkSelector))t=a.href;else{for(;a=a.parentNode;)if("A"===a.tagName){r=a;break}if(!r||!r.matches(n.linkSelector))return;t=(a=r).href}X("GET",t,null,a,e)}}function P(e){var t,r,a,o=e.target;if(o.matches(n.formSelector)&&("POST"!==(a=String(o.method).toUpperCase())||u)){if(t=o.action,"POST"!==a||"multipart/form-data"!==o.enctype)r=function(e){var t=[];return E(e,"[name]",function(e){e.name&&m.test(e.tagName)&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")}(o),"POST"!==a&&(t=t.replace(/\?.*/g,"")+"?",r&&(t+=r),r=null);else{if(!u)return;r=new FormData(o)}X(a,t,r,o,e)}}function X(e,t,r,a,i){if(t===h||0===t.indexOf(h+"/")){var l=String(a.target).toLowerCase();if(!l||"_self"==l||l===o.name||"_parent"===l&&o===o.parent){i.preventDefault();var c=function(e){var t,r,a=JSON.parse(JSON.stringify(n)),o=["containers","updatecurrent","updatehead","insertion","loader","scroll-left","scroll-top","done","fail"];if(!e)return a;for(var i=o.length-1;i>=0;i--)(r=b(e,t=o[i]))&&(a[t=t.toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})]=r);return a}(a);"POST"===e||t!==o.location+""?O(t,S,e,a,r,c):c.updatecurrent&&O(t,L,e,a,r,c)}}}function A(e){e.state&&e.state.pjaxUrl&&(D(),H(e.state.pjaxUrl,e.state.pjaxData,e.state.pjaxConfig,!1),C("history",e.state.pjaxUrl,e.state))}function R(){if(!v){v=!0;var e=o.location+"",t=o.history.state;t&&t.pjaxUrl||l.replaceState({pjaxUrl:e,pjaxData:i.documentElement.outerHTML,pjaxConfig:n},i.title,e),o.addEventListener("unload",D),o.addEventListener("popstate",A),n.linkSelector&&i.addEventListener("click",U),n.formSelector&&i.addEventListener("submit",P)}}function k(){n&&v&&(i.removeEventListener("click",U),i.removeEventListener("submit",P),o.removeEventListener("unload",D),o.removeEventListener("popstate",A),v=!1,n=e)}g&&!g.matches&&(g.matches=g.matchesSelector||g.mozMatchesSelector||g.msMatchesSelector||g.oMatchesSelector||g.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1}),o.Pjax={supported:T,remove:k,start:function(e){if(T&&/^https?:$/.test(o.location.protocol)){for(var t in k(),n={linkSelector:"a:not([data-pjax-ignore]):not([href^='#']):not([href^='javascript:'])",formSelector:"form:not([data-pjax-ignore]):not([action^='javascript:'])",containers:["#pjax-container"],updatecurrent:!1,updatehead:!0,insertion:!0,scrollLeft:0,scrollTop:0,nocache:!1,loader:!0,proxy:"",headers:{}})e&&t in e&&(n[t]=e[t]);e=null,/^(interactive|complete)$/.test(i.readyState)?R():i.addEventListener("DOMContentLoaded",R)}},request:function(e,t){O(e,t.replace?L:S,t.method,null,t.data)},on:function(e,t){N(e,t)},off:function(e,t){N(e,t,!0)}}}();
