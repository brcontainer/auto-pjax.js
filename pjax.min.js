/* Pjax.js 0.6.3 | Copyright (c) 2020 Guilherme Nascimento (brcontainer@yahoo.com.br) | Released under the MIT license */

!function(e){var t,n,r,a,o="undefined"!=typeof window?window:{},i=o.document||{},l=o.history,c=o.URL,s=!!o.DOMParser,u={},d=i.implementation,p=o.location,f=p?p.protocol.replace(/:/g,"")+"://"+o.location.host:"",h=/^(input|textarea|select|datalist|button|output)$/i,m=!1,v=o.Element&&o.Element.prototype,x=Array.prototype.slice,g=1,S=2,L=v&&l.pushState&&(s||d&&d.createHTMLDocument),T={supported:L,remove:k,start:function(e){if(L&&/^https?:$/.test(o.location.protocol)){for(var t in k(),n={linkSelector:"a:not([data-pjax-ignore]):not([href^='#']):not([href^='javascript:'])",formSelector:"form:not([data-pjax-ignore]):not([action^='javascript:'])",containers:["#pjax-container"],updatecurrent:!1,updatehead:!0,insertion:!0,scrollLeft:0,scrollTop:0,nocache:!1,loader:!0,proxy:"",headers:{}})e&&t in e&&(n[t]=e[t]);e=null,/^(interactive|complete)$/.test(i.readyState)?R():i.addEventListener("DOMContentLoaded",R)}},request:function(e,t){w(e,t.replace?S:g,t.method,null,t.data)},on:function(e,t){D(e,t)},off:function(e,t){D(e,t,!0)}};if(s)try{var j=M("<html><head><title>1</title></head><body>1</body></html>");s=!!(j.head&&j.title&&j.body)}catch(e){s=!1}function y(){if(r)return clearTimeout(r),r=0,a.className="pjax-loader pjax-hide",void setTimeout(y,20);a||((a=i.createElement("div")).innerHTML='<div class="pjax-progress"></div>',i.body.appendChild(a)),a.className="pjax-loader pjax-start",r=setTimeout(function(){r=0,a.className+=" pjax-inload"},10)}function E(t,n,r){[].slice.call(t.querySelectorAll(n)).forEach(r),r=e}function M(e){if(s)return(new DOMParser).parseFromString(e,"text/html");var t=d.createHTMLDocument("");return/^\s*<(\!doctype|html)[^>]*>/i.test(e)?(t.documentElement.innerHTML=e,t.body&&t.head||(t=d.createHTMLDocument("")).write(e)):t.body.innerHTML=e,t}function C(e,t,n,r){if(u[e])for(var a=u[e],o=0,i=a.length;o<i;o++)a[o](t,n,r)}function D(e,t,n){"function"==typeof t&&(u[e]||(u[e]=[]),n?u[e]=u[e].filter(function(e){return e!==t}):u[e].push(t))}function N(e,t,n,r){var a,c=M(t),s=c.title||"",d=n.containers,p=n.insertion,f=n.scrollLeft>0?+n.scrollLeft:o.scrollX||o.pageXOffset,h=n.scrollTop>0?+n.scrollTop:o.scrollY||o.pageYOffset;if(r){var m={pjaxUrl:e,pjaxData:t,pjaxConfig:n};r===g?l.pushState(m,s,e):r===S&&l.replaceState(m,s,e)}if(u.dom)return C("dom",e,c);n.updatehead&&c.head&&function(e){var t,n,r,a=[],o=e.children;for(t=o.length-1;t>=0;t--)"TITLE"!==o[t].tagName&&a.push(o[t].outerHTML);for(t=(o=i.head.children).length-1;t>=0;t--)"TITLE"===o[t].tagName||H(o[t],"resource")||(-1===(n=a.indexOf(o[t].outerHTML))?o[t].parentNode.removeChild(o[t]):a.splice(n,1));for((r=i.createElement("div")).innerHTML=a.join(""),t=(o=r.children).length-1;t>=0;t--)H(o[t],"resource")||i.head.appendChild(o[t]);r=a=null}(c.head),i.title=s;for(var v=d.length-1;v>=0;v--)(a=c.body.querySelector(d[v]))&&E(i,d[v],function(e){if("append"===p||"prepend"===p){for(var t=i.createDocumentFragment(),n=0,r=x.call(a.childNodes),o=r.length;n<o;++n)t.appendChild(r[n]);"append"===p?e.appendChild(t):e.insertBefore(t,e.firstChild),t=null}else e.innerHTML=a.innerHTML});o.scrollTo(f,h),c=d=null}function H(e,t){var n=e.getAttribute("data-pjax-"+t);if("true"===n||"false"===n)return"true"===n;if(!isNaN(n))return parseFloat(n);if(/^\[[\s\S]+\]$|^\{[^:]+[:][\s\S]+\}$/.test(n))try{n=JSON.parse(n)}catch(e){}return n}function b(e,t,n,o,i,l){t.loader&&(r&&clearTimeout(r),a.className+=" pjax-end",r=setTimeout(function(){r=0,a.className+=" pjax-hide"},1e3)),l&&N(e,l,t,n),C(l?"done":"fail",e),C("then",e),i&&new Function(i).call(o)}function O(){t&&t.abort()}function w(e,r,a,o,l){O();var s=function(e){var t,r,a=JSON.parse(JSON.stringify(n)),o=["containers","updatecurrent","updatehead","insertion","loader","scroll-left","scroll-top","done","fail"];if(!e)return a;for(var i=o.length-1;i>=0;i--)(r=H(e,t=o[i]))&&(a[t=t.toLowerCase().replace(/-([a-z])/g,function(e,t){return t.toUpperCase()})]=r);return a}(o);C("initiate",e,s),s.loader&&y();var d=n.headers;if(d["X-PJAX-Container"]=s.containers.join(","),d["X-PJAX"]="true",u.handler)return C("handler",{url:e,state:r,method:a,element:o},s,b);for(var p in n.proxy&&(e=n.proxy+encodeURIComponent(e)),n.nocache&&(e=function(e){var t,n="_="+ +new Date;return c?(t=i.createElement("a")).href=e:t=new c(e),t.search+=(t.search?"&":"?")+n,e=t+"",t=null,e}(e)),(t=new XMLHttpRequest).open(a,e,!0),d)t.setRequestHeader(p,d[p]);t.onreadystatechange=function(){if(4===this.readyState){var n=this.status;if(n>=200&&n<300){var a=t.getResponseHeader("X-PJAX-Container");a&&(s.containers=a.split(",")),b(t.getResponseHeader("X-PJAX-URL")||e,s,r,o,s.done,this.responseText)}else b(e,s,n,o,s.fail)}},t.send(l||"")}function U(e){if(0===e.button){var t,r,a=e.target;if(a.matches(n.linkSelector))t=a.href;else{for(;a=a.parentNode;)if("A"===a.tagName){r=a;break}if(!r||!r.matches(n.linkSelector))return;t=(a=r).href}X("GET",t,null,a,e)}}function P(e){var t,r,a,i=e.target;if(i.matches(n.formSelector)&&("POST"!==(a=String(i.method).toUpperCase())||o.FormData)){if(t=i.action,"POST"!==a||"multipart/form-data"!==i.enctype)r=function(e){var t=[];return E(e,"[name]",function(e){e.name&&h.test(e.tagName)&&t.push(encodeURIComponent(e.name)+"="+encodeURIComponent(e.value))}),t.join("&")}(i),"POST"!==a&&(t=t.replace(/\?.*/g,"")+"?",r&&(t+=r),r=null);else{if(!o.FormData)return;r=new FormData(i)}X(a,t,r,i,e)}}function X(e,t,n,r,a){0!==t.indexOf(f+"/")&&t!==f||(a.preventDefault(),t!==f&&0!==t.indexOf(f+"/")||(a.preventDefault(),"POST"===e||t!==o.location+""?w(t,g,e,r,n):updatecurrent&&w(t,S,e,r,n)))}function A(e){e.state&&e.state.pjaxUrl&&(O(),N(e.state.pjaxUrl,e.state.pjaxData,e.state.pjaxConfig,!1),C("history",e.state.pjaxUrl,e.state))}function R(){if(!m){m=!0;var e=o.location+"",t=o.history.state;t&&t.pjaxUrl||l.replaceState({pjaxUrl:e,pjaxData:i.documentElement.outerHTML,pjaxConfig:n},i.title,e),o.addEventListener("unload",O),o.addEventListener("popstate",A),n.linkSelector&&i.addEventListener("click",U),n.formSelector&&i.addEventListener("submit",P)}}function k(){n&&m&&(i.removeEventListener("click",U),i.removeEventListener("submit",P),o.removeEventListener("unload",O),o.removeEventListener("popstate",A),m=!1,n=e)}v&&!v.matches&&(v.matches=v.matchesSelector||v.mozMatchesSelector||v.msMatchesSelector||v.oMatchesSelector||v.webkitMatchesSelector||function(e){for(var t=(this.document||this.ownerDocument).querySelectorAll(e),n=t.length;--n>=0&&t[n]!==this;);return n>-1}),o.Pjax=T}();
